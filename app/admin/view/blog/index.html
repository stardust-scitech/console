<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>login</title>
    </head>
    <body>
        <iframe name="iframe" onload="login()" src="http://localhost/web/blog/wp-login.php" id="iframe" frameborder="0" scrolling="no" style="position: fixed;top: 0%;left: 0%;width: 100%;height: 100%;border: none;margin: 0;padding: 0;overflow: hidden;z-index: 9999;">
        </iframe>

        <script Language="JavaScript">
            var flag = 1;

            function getCookieValue(cookie, key) 
            {
                const regex = new RegExp(`${key}=([^;]+)`);
                const match = cookie.match(regex);
                return match && match[1];
            }

            function login()
            {
                var iframe = document.getElementById('iframe');
                var form = iframe.contentDocument.getElementById('loginform');
                const cookie = iframe.contentDocument.cookie;

                if(!getCookieValue(cookie, "{$cookie|raw}"))
                {
                    console.log("error");


                    if(flag)
                    {
                        flag = 0;

                        var username = iframe.contentDocument.getElementById('user_login');
                        var password = iframe.contentDocument.getElementById('user_pass');
                        
                        username.value = "{$log|raw}";
                        password.value = "{$pwd|raw}";
                        form.submit();
                    }
                }
                else
                {
                    window.open("{$redirect_to}", '_self');
                }
            }
        </script>
    </body>
</html>